<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta tags and title -->
    <meta charset="UTF-8">
    <title>Department Assistant</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <!-- Custom Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

<div class="container-fluid d-flex p-0">
    <!-- Sidebar -->
    <div class="sidebar bg-dark text-white p-3">
        <h3 class="mb-4"><i class="fas fa-robot"></i> Department Assistant</h3>
        <button class="btn btn-primary w-100 mb-3" data-bs-toggle="modal" data-bs-target="#uploadModal">
            <i class="fas fa-file-upload"></i> Upload Files
        </button>
        <button class="btn btn-secondary w-100 mb-3" data-bs-toggle="modal" data-bs-target="#scenarioModal">
            <i class="fas fa-plus-circle"></i> Add Scenario
        </button>
        <!-- Collapsible Menu for Uploaded Files -->
        <div class="accordion" id="fileAccordion">
            <div class="accordion-item bg-dark text-white">
                <h2 class="accordion-header" id="headingFiles">
                    <button class="accordion-button collapsed bg-dark text-white" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFiles" aria-expanded="false" aria-controls="collapseFiles">
                        <i class="fas fa-folder-open"></i> Uploaded Files
                    </button>
                </h2>
                <div id="collapseFiles" class="accordion-collapse collapse" aria-labelledby="headingFiles" data-bs-parent="#fileAccordion">
                    <div class="accordion-body p-0" id="fileList">
                        <!-- File list will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Area -->
    <div class="chat-container flex-grow-1 d-flex flex-column">
        <div class="chat-box flex-grow-1 p-3" id="chatBox"></div>
        <div class="input-group p-3">
            <input type="text" class="form-control" id="questionInput" placeholder="Type your message here..." autocomplete="off">
            <button class="btn btn-success" id="sendButton"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>
</div>

<!-- Upload Modal -->
<div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <form id="uploadForm" enctype="multipart/form-data">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title" id="uploadModalLabel"><i class="fas fa-file-upload"></i> Upload Department Files</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <input type="file" name="files[]" class="form-control" id="fileInput" multiple required>
                    <div id="uploadResponse" class="mt-3"></div>
                    <div class="progress mt-2" style="display: none;">
                        <div class="progress-bar" role="progressbar" style="width: 0%;" 
                        aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary"><i class="fas fa-upload"></i> Upload File(s)</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- Add Scenario Modal -->
<div class="modal fade" id="scenarioModal" tabindex="-1" aria-labelledby="scenarioModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <form id="addScenarioForm">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title" id="scenarioModalLabel"><i class="fas fa-plus-circle"></i> Add New Scenario</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <textarea class="form-control" id="scenarioInput" rows="6" placeholder="Type the new scenario here" required></textarea>
                    <div id="scenarioResponse" class="mt-3"></div>
                </div>
                <div class="modal-footer">
                    <button type="submit" class="btn btn-secondary"><i class="fas fa-plus"></i> Add Scenario</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- jQuery and Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Custom Script -->
<script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
